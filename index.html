<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lusungulo Fresh Broilers</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#e8f5e9;margin:0;padding:10px}
.app{max-width:480px;margin:auto;background:white;border-radius:15px;box-shadow:0 5px 20px rgba(0,0,0,.2);overflow:hidden}
header{background:#2e7d32;color:white;padding:15px;text-align:center}
.section{padding:15px}
input,select{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:1px solid #ccc}
button{padding:12px;margin-top:12px;width:100%;border:none;border-radius:10px;background:#4caf50;color:white;font-size:16px}
.notice{background:#c8e6c9;padding:10px;border-left:5px solid green;margin:10px 0}
#receipt,#adminPanel{display:none}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center}
.modal-box{background:white;padding:20px;border-radius:10px;text-align:center}
</style>
</head>

<body>

<div class="app">
<header>
<h2>ğŸ” Lusungulo Fresh Broilers</h2>
<p>Premium Quality â€¢ Free Delivery</p>
</header>

<div class="section">
<div class="notice">
<b>ğŸ” Securing Order Fee:</b>  
E50 refundable deposit required to secure your order.
</div>

<form id="orderForm">
<input id="name" placeholder="Full Name" required>
<input id="phone" placeholder="Phone Number" required>
<input id="idNumber" placeholder="National ID Number" required>
<input id="address" placeholder="Delivery Address" required>

<select id="size" required>
<option value="">Select Size</option>
<option>Small</option>
<option>Medium</option>
<option>Large</option>
</select>

<input type="number" id="qty" placeholder="Quantity" min="1" required>

<select id="time" required>
<option value="">Delivery Time</option>
<option>Morning</option>
<option>Afternoon</option>
<option>Evening</option>
</select>

<h4>ğŸ’³ Deposit Payment</h4>
<input type="date" id="payDate" required>
<input type="time" id="payTime" required>
<input id="momoID" placeholder="MoMo Transaction ID" required>

<button type="submit">SECURE ORDER</button>
</form>

<button onclick="showAdmin()">ADMIN PANEL</button>
</div>

<!-- RECEIPT -->
<div id="receipt" class="section">
<h3>ğŸ§¾ RECEIPT</h3>
<p id="rName"></p>
<p id="rPhone"></p>
<p id="rOrder"></p>
<p id="rDeposit"></p>
<p id="rTxn"></p>
<button onclick="window.print()">ğŸ–¨ Print</button>
</div>

<!-- ADMIN -->
<div id="adminPanel" class="section">
<h3>ğŸ“Š ADMIN PANEL</h3>
<div id="ordersList"></div>
<button onclick="hideAdmin()">Close Admin</button>
</div>

</div>

<div class="modal" id="modal">
<div class="modal-box">
<h3>âœ… Order Sent</h3>
<p>We will call you shortly.</p>
<button onclick="closeModal()">OK</button>
</div>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
// ğŸ”´ PUT YOUR FIREBASE KEYS HERE
var firebaseConfig = {
apiKey: "YOUR_API_KEY",
authDomain: "YOUR_PROJECT.firebaseapp.com",
databaseURL: "https://YOUR_PROJECT.firebaseio.com",
projectId: "YOUR_PROJECT"
};
firebase.initializeApp(firebaseConfig);
var db = firebase.database();

const form=document.getElementById("orderForm");
const modal=document.getElementById("modal");
const receipt=document.getElementById("receipt");
const adminPanel=document.getElementById("adminPanel");
const ordersList=document.getElementById("ordersList");

form.addEventListener("submit",function(e){
e.preventDefault();

let name=name=document.getElementById("name").value;
let phone=document.getElementById("phone").value;
let idNumber=document.getElementById("idNumber").value;
let address=document.getElementById("address").value;
let size=document.getElementById("size").value;
let qty=document.getElementById("qty").value;
let time=document.getElementById("time").value;
let payDate=document.getElementById("payDate").value;
let payTime=document.getElementById("payTime").value;
let momoID=document.getElementById("momoID").value;

let order={
name,phone,idNumber,address,size,qty,time,payDate,payTime,momoID
};

db.ref("orders").push(order);

// WhatsApp
let msg=`ğŸ” NEW ORDER
Name: ${name}
Phone: ${phone}
ID: ${idNumber}
Address: ${address}
Size: ${size}
Qty: ${qty}
Delivery: ${time}

Deposit: E50
Date: ${payDate}
Time: ${payTime}
MoMo Txn: ${momoID}`;

let whatsapp="26876123456"; // ğŸ‘ˆ CHANGE
window.open("https://wa.me/"+whatsapp+"?text="+encodeURIComponent(msg),"_blank");

// Receipt
document.getElementById("rName").innerText="Name: "+name;
document.getElementById("rPhone").innerText="Phone: "+phone;
document.getElementById("rOrder").innerText=`Order: ${size} x ${qty}`;
document.getElementById("rDeposit").innerText="Deposit: E50 (Refundable)";
document.getElementById("rTxn").innerText="MoMo Txn: "+momoID;
receipt.style.display="block";

modal.style.display="flex";
form.reset();
});

function closeModal(){modal.style.display="none";}

function showAdmin(){
adminPanel.style.display="block";
db.ref("orders").on("value",snap=>{
let html="";
snap.forEach(s=>{
let o=s.val();
html+=`<p>ğŸ“¦ ${o.name} - ${o.qty} (${o.size})</p>`;
});
ordersList.innerHTML=html;
});
}

function hideAdmin(){
adminPanel.style.display="none";
}
</script>

</body>
</html>
